webpackJsonp([9],{1821:function(l,n,t){"use strict";function e(l){return r._57(0,[(l()(),r._31(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==l.component.toggleDelete()&&e}return e},$.b,$.a)),r._30(1,1097728,[[1,4]],0,R.a,[[8,""],E.a,r.t,r.V],null,null),r._47(131072,L.a,[M.a,r.j]),(l()(),r._55(-1,0,["\n                "])),(l()(),r._31(4,0,null,0,1,"ion-icon",[["ios","md-create"],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._30(5,147456,null,0,C.a,[E.a,r.t,r.V],{name:[0,"name"],ios:[1,"ios"]},null),(l()(),r._55(-1,0,["\n            "]))],function(l,n){l(n,5,0,"create","md-create")},function(l,n){l(n,0,0,r._56(n,0,0,r._44(n,2).transform("core.delete")));l(n,4,0,r._44(n,5)._hidden)})}function u(l){return r._57(0,[(l()(),r._31(0,0,null,null,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),r._30(1,16384,null,0,N.a,[E.a,r.t,r.V],null,null),(l()(),r._55(2,null,["",""]))],null,function(l,n){l(n,2,0,n.parent.context.$implicit.badge)})}function a(l){return r._57(0,[(l()(),r._31(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==l.component.deleteSite(t,l.parent.context.index)&&e}return e},$.b,$.a)),r._30(1,1097728,[[3,4]],0,R.a,[[8,""],E.a,r.t,r.V],{color:[0,"color"],clear:[1,"clear"]},null),r._47(131072,L.a,[M.a,r.j]),(l()(),r._55(-1,0,["\n                "])),(l()(),r._31(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._30(5,147456,null,0,C.a,[E.a,r.t,r.V],{name:[0,"name"]},null),(l()(),r._55(-1,0,["\n            "]))],function(l,n){l(n,1,0,"danger","");l(n,5,0,"trash")},function(l,n){l(n,0,0,r._56(n,0,0,r._44(n,2).transform("core.delete")));l(n,4,0,r._44(n,5)._hidden)})}function i(l){return r._57(0,[(l()(),r._31(0,0,null,null,31,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==l.component.login(l.context.$implicit.id)&&e}return e},H.b,H.a)),r._30(1,1097728,null,3,T.a,[F.a,E.a,r.t,r.V,[2,A.a]],null,null),r._52(335544320,2,{contentLabel:0}),r._52(603979776,3,{_buttons:1}),r._52(603979776,4,{_icons:1}),r._30(5,16384,null,0,B.a,[],null,null),(l()(),r._55(-1,2,["\n            "])),(l()(),r._31(7,0,null,0,7,"ion-avatar",[["item-start",""]],null,null,null,null,null)),r._30(8,16384,null,0,G.a,[],null,null),(l()(),r._55(-1,null,["\n                "])),(l()(),r._31(10,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),r._30(11,4210688,null,0,J.a,[r.t,s.a,K.a,q.a,d.a,f.a,z.a,Q.a],{siteId:[0,"siteId"]},null),r._48(12,{$a:0}),r._47(131072,L.a,[M.a,r.j]),(l()(),r._55(-1,null,["\n            "])),(l()(),r._55(-1,2,["\n            "])),(l()(),r._31(16,0,null,2,1,"h2",[],null,null,null,null,null)),(l()(),r._55(17,null,["",""])),(l()(),r._55(-1,2,["\n            "])),(l()(),r._31(19,0,null,2,2,"p",[],null,null,null,null,null)),(l()(),r._31(20,0,null,null,1,"core-format-text",[["clean","true"],["watch","true"]],null,null,null,null,null)),r._30(21,540672,null,0,W.a,[r.t,d.a,f.a,g.a,M.a,q.a,X.a,z.a,s.a,K.a,Q.a,Y.a,[2,Z.a],[2,ll.a]],{text:[0,"text"],siteId:[1,"siteId"],clean:[2,"clean"]},null),(l()(),r._55(-1,2,["\n            "])),(l()(),r._31(23,0,null,2,1,"p",[],null,null,null,null,null)),(l()(),r._55(24,null,["",""])),(l()(),r._55(-1,2,["\n            "])),(l()(),r._26(16777216,null,4,1,null,u)),r._30(27,16384,null,0,nl.k,[r._11,r._6],{ngIf:[0,"ngIf"]},null),(l()(),r._55(-1,2,["\n            "])),(l()(),r._26(16777216,null,4,1,null,a)),r._30(30,16384,null,0,nl.k,[r._11,r._6],{ngIf:[0,"ngIf"]},null),(l()(),r._55(-1,2,["\n        "]))],function(l,n){var t=n.component;l(n,11,0,n.context.$implicit.id);l(n,21,0,n.context.$implicit.siteName,n.context.$implicit.id,"true");l(n,27,0,!t.showDelete&&n.context.$implicit.badge);l(n,30,0,t.showDelete)},function(l,n){l(n,10,0,n.context.$implicit.avatar,r._34(1,"",r._56(n,10,1,r._44(n,13).transform("core.pictureof",l(n,12,0,n.context.$implicit.fullname))),""));l(n,17,0,n.context.$implicit.fullName);l(n,24,0,n.context.$implicit.siteUrl)})}function o(l){return r._57(0,[(l()(),r._31(0,0,null,null,19,"ion-header",[],null,null,null,null,null)),r._30(1,16384,null,0,tl.a,[E.a,r.t,r.V,[2,el.a]],null,null),(l()(),r._55(-1,null,["\n    "])),(l()(),r._31(3,0,null,null,15,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,ul.b,ul.a)),r._30(4,49152,null,0,al.a,[il.a,[2,el.a],[2,Z.a],E.a,r.t,r.V],null,null),(l()(),r._55(-1,3,["\n        "])),(l()(),r._31(6,0,null,3,3,"ion-title",[],null,null,null,ol.b,ol.a)),r._30(7,49152,null,0,rl.a,[E.a,r.t,r.V,[2,cl.a],[2,al.a]],null,null),(l()(),r._55(8,0,["",""])),r._47(131072,L.a,[M.a,r.j]),(l()(),r._55(-1,3,["\n\n        "])),(l()(),r._31(11,0,null,2,6,"ion-buttons",[["end",""]],null,null,null,null,null)),r._30(12,16384,null,1,_l.a,[E.a,r.t,r.V,[2,cl.a],[2,al.a]],null,null),r._52(603979776,1,{_buttons:1}),(l()(),r._55(-1,null,["\n            "])),(l()(),r._26(16777216,null,null,1,null,e)),r._30(16,16384,null,0,nl.k,[r._11,r._6],{ngIf:[0,"ngIf"]},null),(l()(),r._55(-1,null,["\n        "])),(l()(),r._55(-1,3,["\n    "])),(l()(),r._55(-1,null,["\n"])),(l()(),r._55(-1,null,["\n"])),(l()(),r._31(21,0,null,null,23,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,sl.b,sl.a)),r._30(22,4374528,null,0,ll.a,[E.a,q.a,dl.a,r.t,r.V,il.a,fl.a,r.M,[2,el.a],[2,Z.a]],null,null),(l()(),r._55(-1,1,["\n    "])),(l()(),r._31(24,0,null,1,5,"ion-list",[],null,null,null,null,null)),r._30(25,16384,null,0,gl.a,[E.a,r.t,r.V,q.a,hl.l,dl.a],null,null),(l()(),r._55(-1,null,["\n        "])),(l()(),r._26(16777216,null,null,1,null,i)),r._30(28,802816,null,0,nl.j,[r._11,r._6,r.E],{ngForOf:[0,"ngForOf"]},null),(l()(),r._55(-1,null,["\n    "])),(l()(),r._55(-1,1,["\n    "])),(l()(),r._31(31,0,null,0,12,"ion-fab",[["bottom",""],["right",""]],null,null,null,ml.b,ml.a)),r._30(32,1228800,null,2,pl.a,[q.a],null,null),r._52(335544320,5,{_mainButton:0}),r._52(603979776,6,{_fabLists:1}),(l()(),r._55(-1,0,["\n        "])),(l()(),r._31(36,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==l.component.add()&&e}return e},bl.b,bl.a)),r._30(37,49152,[[5,4]],0,vl.a,[E.a,r.t,r.V],null,null),r._47(131072,L.a,[M.a,r.j]),(l()(),r._55(-1,0,["\n            "])),(l()(),r._31(40,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._30(41,147456,null,0,C.a,[E.a,r.t,r.V],{name:[0,"name"]},null),(l()(),r._55(-1,0,["\n        "])),(l()(),r._55(-1,0,["\n    "])),(l()(),r._55(-1,1,["\n"])),(l()(),r._55(-1,null,["\n"]))],function(l,n){var t=n.component;l(n,16,0,t.sites&&t.sites.length>0);l(n,28,0,t.sites);l(n,41,0,"add")},function(l,n){l(n,3,0,r._44(n,4)._hidden,r._44(n,4)._sbPadding);l(n,8,0,r._56(n,8,0,r._44(n,9).transform("core.settings.sites")));l(n,21,0,r._44(n,22).statusbarPadding,r._44(n,22)._hasRefresher);l(n,36,0,r._56(n,36,0,r._44(n,38).transform("core.add")));l(n,40,0,r._44(n,41)._hidden)})}Object.defineProperty(n,"__esModule",{value:!0});var r=t(0),c=t(9),_=t(7),s=t(2),d=t(1),f=t(6),g=t(10),h=t(324),m=t(113),p=this&&this.__decorate||function(l,n,t,e){var u,a=arguments.length,i=a<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(l,n,t,e);else for(var o=l.length-1;o>=0;o--)(u=l[o])&&(i=(a<3?u(i):a>3?u(n,t,i):u(n,t))||i);return a>3&&i&&Object.defineProperty(n,t,i),i},b=this&&this.__metadata||function(l,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(l,n)},v=function(){function l(l,n,t,e,u,a,i){this.domUtils=l,this.textUtils=n,this.sitesProvider=t,this.loginHelper=e,this.translate=a,this.pushNotificationsProvider=i,this.logger=u.getInstance("CoreLoginSitesPage")}return l.prototype.ionViewDidLoad=function(){var l=this;this.sitesProvider.getSortedSites().then(function(n){l.sites=n.map(function(n){return n.siteUrl=n.siteUrl.replace(/^https?:\/\//,""),n.badge=0,l.pushNotificationsProvider.getSiteCounter(n.id).then(function(l){n.badge=l}),n}),l.showDelete=!1}).catch(function(){})},l.prototype.add=function(){this.loginHelper.goToAddSite(!1)},l.prototype.deleteSite=function(l,n){var t=this;l.stopPropagation();var e=this.sites[n];this.textUtils.formatText(e.siteName).then(function(l){t.domUtils.showConfirm(t.translate.instant("core.login.confirmdeletesite",{sitename:l})).then(function(){t.sitesProvider.deleteSite(e.id).then(function(){t.sites.splice(n,1),t.showDelete=!1,t.sitesProvider.hasSites().then(function(l){l||t.loginHelper.goToAddSite(!0)})}).catch(function(l){t.logger.error("Error deleting site "+e.id,l),t.domUtils.showErrorModalDefault(l,"Delete site failed."),t.domUtils.showErrorModal("core.login.errordeletesite",!0)})}).catch(function(){})})},l.prototype.login=function(l){var n=this,t=this.domUtils.showModalLoading();this.sitesProvider.loadSite(l).then(function(){if(!n.loginHelper.isSiteLoggedOut())return n.loginHelper.goToSiteInitialPage()}).catch(function(t){n.logger.error("Error loading site "+l,t),n.domUtils.showErrorModalDefault(t,"Error loading site.")}).finally(function(){t.dismiss()})},l.prototype.toggleDelete=function(){this.showDelete=!this.showDelete},l=p([Object(r.m)({selector:"page-core-login-sites",templateUrl:"sites.html"}),b("design:paramtypes",[f.a,g.a,d.a,m.a,s.a,_.c,h.a])],l)}(),y=t(30),x=this&&this.__decorate||function(l,n,t,e){var u,a=arguments.length,i=a<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(l,n,t,e);else for(var o=l.length-1;o>=0;o--)(u=l[o])&&(i=(a<3?u(i):a>3?u(n,t,i):u(n,t))||i);return a>3&&i&&Object.defineProperty(n,t,i),i},P=function(){function l(){}return l=x([Object(r.I)({declarations:[v],imports:[y.a,c.l.forChild(v),_.b.forChild()]})],l)}(),V=t(1243),j=t(1244),w=t(1245),D=t(1246),S=t(1247),k=t(1248),I=t(1249),O=t(1250),U=t(1251),$=t(43),R=t(37),E=t(3),L=t(28),M=t(15),C=t(38),N=t(229),H=t(33),T=t(19),F=t(18),A=t(29),B=t(32),G=t(185),J=t(166),K=t(16),q=t(13),z=t(23),Q=t(12),W=t(39),X=t(4),Y=t(22),Z=t(20),ll=t(24),nl=t(8),tl=t(402),el=t(34),ul=t(1252),al=t(182),il=t(27),ol=t(1253),rl=t(315),cl=t(227),_l=t(403),sl=t(183),dl=t(25),fl=t(93),gl=t(75),hl=t(35),ml=t(1851),pl=t(624),bl=t(1852),vl=t(322),yl=r._29({encapsulation:2,styles:[],data:{}}),xl=r._27("page-core-login-sites",v,function(l){return r._57(0,[(l()(),r._31(0,0,null,null,1,"page-core-login-sites",[],null,null,null,o,yl)),r._30(1,49152,null,0,v,[f.a,g.a,d.a,m.a,s.a,M.a,h.a],null,null)],null,null)},{},{},[]),Pl=t(17),Vl=t(311),jl=t(312),wl=t(314),Dl=t(313),Sl=t(401),kl=t(615),Il=t(228);t.d(n,"CoreLoginSitesPageModuleNgFactory",function(){return Ol});var Ol=r._28(P,[],function(l){return r._40([r._41(512,r.o,r._21,[[8,[V.a,j.a,w.a,D.a,S.a,k.a,I.a,O.a,U.a,xl]],[3,r.o],r.K]),r._41(4608,nl.m,nl.l,[r.G,[2,nl.v]]),r._41(4608,Pl.x,Pl.x,[]),r._41(4608,Pl.d,Pl.d,[]),r._41(4608,Vl.b,Vl.a,[]),r._41(4608,jl.a,jl.b,[]),r._41(4608,wl.b,wl.a,[]),r._41(4608,Dl.b,Dl.a,[]),r._41(4608,M.a,M.a,[Sl.a,Vl.b,jl.a,wl.b,Dl.b,M.b,M.c]),r._41(512,y.a,y.a,[]),r._41(512,nl.b,nl.b,[]),r._41(512,Pl.v,Pl.v,[]),r._41(512,Pl.i,Pl.i,[]),r._41(512,Pl.s,Pl.s,[]),r._41(512,kl.a,kl.a,[]),r._41(512,kl.b,kl.b,[]),r._41(512,_.b,_.b,[]),r._41(512,P,P,[]),r._41(256,Il.a,v,[]),r._41(256,M.c,void 0,[]),r._41(256,M.b,void 0,[])])})},1851:function(l,n,t){"use strict";function e(l){return u._57(0,[u._43(null,0)],null,null)}t.d(n,"a",function(){return o}),n.b=e;var u=t(0),a=t(624),i=t(13),o=u._29({encapsulation:2,styles:[],data:{}});u._27("ion-fab",a.a,function(l){return u._57(0,[(l()(),u._31(0,0,null,null,3,"ion-fab",[],null,null,null,e,o)),u._30(1,1228800,null,2,a.a,[i.a],null,null),u._52(335544320,1,{_mainButton:0}),u._52(603979776,2,{_fabLists:1})],null,null)},{},{},["*"])},1852:function(l,n,t){"use strict";function e(l){return u._57(2,[(l()(),u._31(0,0,null,null,1,"ion-icon",[["class","fab-close-icon"],["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),u._30(1,147456,null,0,a.a,[i.a,u.t,u.V],{name:[0,"name"]},null),(l()(),u._31(2,0,null,null,1,"span",[["class","button-inner"]],null,null,null,null,null)),u._43(null,0),(l()(),u._31(4,0,null,null,0,"div",[["class","button-effect"]],null,null,null,null,null))],function(l,n){l(n,1,0,"close")},function(l,n){l(n,0,0,u._44(n,1)._hidden)})}t.d(n,"a",function(){return r}),n.b=e;var u=t(0),a=t(38),i=t(3),o=t(322),r=u._29({encapsulation:2,styles:[],data:{}});u._27("[ion-fab]",o.a,function(l){return u._57(0,[(l()(),u._31(0,0,null,null,1,"div",[["ion-fab",""]],null,null,null,e,r)),u._30(1,49152,null,0,o.a,[i.a,u.t,u.V],null,null)],null,null)},{color:"color",mode:"mode"},{},["*"])}});