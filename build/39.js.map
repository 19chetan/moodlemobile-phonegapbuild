{"version":3,"sources":["../../src/core/course/pages/section/section.module.ts","../../src/core/course/pages/section/section.ts"],"names":[],"mappings":"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","file":"39.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CoreCourseSectionPage } from './section';\nimport { CoreComponentsModule } from '@components/components.module';\nimport { CoreDirectivesModule } from '@directives/directives.module';\nimport { CoreCourseComponentsModule } from '../../components/components.module';\n\n@NgModule({\n    declarations: [\n        CoreCourseSectionPage,\n    ],\n    imports: [\n        CoreComponentsModule,\n        CoreDirectivesModule,\n        CoreCourseComponentsModule,\n        IonicPageModule.forChild(CoreCourseSectionPage),\n        TranslateModule.forChild()\n    ],\n})\nexport class CoreCourseSectionPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/course/pages/section/section.module.ts","// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, ViewChild, OnDestroy, Injector } from '@angular/core';\nimport { IonicPage, NavParams, Content, NavController } from 'ionic-angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CoreEventsProvider } from '@providers/events';\nimport { CoreSitesProvider } from '@providers/sites';\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\nimport { CoreTextUtilsProvider } from '@providers/utils/text';\nimport { CoreCourseProvider } from '../../providers/course';\nimport { CoreCourseHelperProvider } from '../../providers/helper';\nimport { CoreCourseFormatDelegate } from '../../providers/format-delegate';\nimport { CoreCourseModulePrefetchDelegate } from '../../providers/module-prefetch-delegate';\nimport { CoreCourseOptionsDelegate, CoreCourseOptionsHandlerToDisplay } from '../../providers/options-delegate';\nimport { CoreCourseFormatComponent } from '../../components/format/format';\nimport { CoreCoursesProvider } from '@core/courses/providers/courses';\n\n/**\n * Page that displays the list of courses the user is enrolled in.\n */\n@IonicPage({ segment: 'core-course-section' })\n@Component({\n    selector: 'page-core-course-section',\n    templateUrl: 'section.html',\n})\nexport class CoreCourseSectionPage implements OnDestroy {\n    @ViewChild(Content) content: Content;\n    @ViewChild(CoreCourseFormatComponent) formatComponent: CoreCourseFormatComponent;\n\n    title: string;\n    course: any;\n    sections: any[];\n    sectionId: number;\n    sectionNumber: number;\n    courseHandlers: CoreCourseOptionsHandlerToDisplay[];\n    dataLoaded: boolean;\n    downloadEnabled: boolean;\n    downloadEnabledIcon = 'square-outline'; // Disabled by default.\n    prefetchCourseData = {\n        prefetchCourseIcon: 'spinner'\n    };\n    moduleId: number;\n    displayEnableDownload: boolean;\n\n    protected module: any;\n    protected completionObserver;\n    protected courseStatusObserver;\n    protected isDestroyed = false;\n\n    constructor(navParams: NavParams, private courseProvider: CoreCourseProvider, private domUtils: CoreDomUtilsProvider,\n            private courseFormatDelegate: CoreCourseFormatDelegate, private courseOptionsDelegate: CoreCourseOptionsDelegate,\n            private translate: TranslateService, private courseHelper: CoreCourseHelperProvider, eventsProvider: CoreEventsProvider,\n            private textUtils: CoreTextUtilsProvider, private coursesProvider: CoreCoursesProvider,\n            sitesProvider: CoreSitesProvider, private navCtrl: NavController, private injector: Injector,\n            private prefetchDelegate: CoreCourseModulePrefetchDelegate) {\n        this.course = navParams.get('course');\n        this.sectionId = navParams.get('sectionId');\n        this.sectionNumber = navParams.get('sectionNumber');\n        this.module = navParams.get('module');\n\n        // Get the title to display. We dont't have sections yet.\n        this.title = courseFormatDelegate.getCourseTitle(this.course);\n        this.displayEnableDownload = courseFormatDelegate.displayEnableDownload(this.course);\n\n        this.completionObserver = eventsProvider.on(CoreEventsProvider.COMPLETION_MODULE_VIEWED, (data) => {\n            if (data && data.courseId == this.course.id) {\n                this.refreshAfterCompletionChange();\n            }\n        });\n\n        // Listen for changes in course status.\n        this.courseStatusObserver = eventsProvider.on(CoreEventsProvider.COURSE_STATUS_CHANGED, (data) => {\n            if (data.courseId == this.course.id) {\n                this.prefetchCourseData.prefetchCourseIcon = this.courseHelper.getCourseStatusIconFromStatus(data.status);\n            }\n        }, sitesProvider.getCurrentSiteId());\n    }\n\n    /**\n     * View loaded.\n     */\n    ionViewDidLoad(): void {\n\n        if (this.module) {\n            this.moduleId = this.module.id;\n            this.courseHelper.openModule(this.navCtrl, this.module, this.course.id, this.sectionId);\n        }\n\n        this.loadData().finally(() => {\n            this.dataLoaded = true;\n\n            // Determine the course prefetch status.\n            this.determineCoursePrefetchIcon().then(() => {\n                if (this.prefetchCourseData.prefetchCourseIcon == 'spinner') {\n                    // Course is being downloaded. Get the download promise.\n                    const promise = this.courseHelper.getCourseDownloadPromise(this.course.id);\n                    if (promise) {\n                        // There is a download promise. Show an error if it fails.\n                        promise.catch((error) => {\n                            if (!this.isDestroyed) {\n                                this.domUtils.showErrorModalDefault(error, 'core.course.errordownloadingcourse', true);\n                            }\n                        });\n                    } else {\n                        // No download, this probably means that the app was closed while downloading. Set previous status.\n                        this.courseProvider.setCoursePreviousStatus(this.course.id).then((status) => {\n                            this.prefetchCourseData.prefetchCourseIcon = this.courseHelper.getCourseStatusIconFromStatus(status);\n                        });\n                    }\n                }\n            });\n        });\n    }\n\n    /**\n     * Fetch and load all the data required for the view.\n     */\n    protected loadData(refresh?: boolean): Promise<any> {\n        // First of all, get the course because the data might have changed.\n        return this.coursesProvider.getUserCourse(this.course.id).catch(() => {\n            // Error getting the course, probably guest access.\n        }).then((course) => {\n            const promises = [];\n            let promise;\n\n            if (course) {\n                this.course = course;\n            }\n\n            // Get the completion status.\n            if (this.course.enablecompletion === false) {\n                // Completion not enabled.\n                promise = Promise.resolve({});\n            } else {\n                promise = this.courseProvider.getActivitiesCompletionStatus(this.course.id).catch(() => {\n                    // It failed, don't use completion.\n                    return {};\n                });\n            }\n\n            promises.push(promise.then((completionStatus) => {\n                // Get all the sections.\n                return this.courseProvider.getSections(this.course.id, false, true).then((sections) => {\n                    if (refresh) {\n                        // Invalidate the recently downloaded module list. To ensure info can be prefetched.\n                        const modules = this.courseProvider.getSectionsModules(sections);\n\n                        return this.prefetchDelegate.invalidateModules(modules, this.course.id).then(() => {\n                            return sections;\n                        });\n                    } else {\n                        return sections;\n                    }\n                }).then((sections) => {\n\n                    this.courseHelper.addHandlerDataForModules(sections, this.course.id, completionStatus);\n\n                    // Format the name of each section and check if it has content.\n                    this.sections = sections.map((section) => {\n                        this.textUtils.formatText(section.name.trim(), true, true).then((name) => {\n                            section.formattedName = name;\n                        });\n                        section.hasContent = this.courseHelper.sectionHasContent(section);\n\n                        return section;\n                    });\n\n                    if (this.courseFormatDelegate.canViewAllSections(this.course)) {\n                        // Add a fake first section (all sections).\n                        this.sections.unshift({\n                            name: this.translate.instant('core.course.allsections'),\n                            id: CoreCourseProvider.ALL_SECTIONS_ID\n                        });\n                    }\n\n                    // Get the title again now that we have sections.\n                    this.title = this.courseFormatDelegate.getCourseTitle(this.course, this.sections);\n                });\n            }));\n\n            // Load the course handlers.\n            promises.push(this.courseOptionsDelegate.getHandlersToDisplay(this.injector, this.course, refresh, false)\n                    .then((handlers) => {\n                // Add the courseId to the handler component data.\n                handlers.forEach((handler) => {\n                    handler.data.componentData = handler.data.componentData || {};\n                    handler.data.componentData.courseId = this.course.id;\n                });\n\n                this.courseHandlers = handlers;\n            }));\n\n            return Promise.all(promises).catch((error) => {\n                this.domUtils.showErrorModalDefault(error, 'core.course.couldnotloadsectioncontent', true);\n            });\n        });\n    }\n\n    /**\n     * Refresh the data.\n     *\n     * @param {any} refresher Refresher.\n     */\n    doRefresh(refresher: any): void {\n        this.invalidateData().finally(() => {\n            this.loadData(true).finally(() => {\n                this.formatComponent.doRefresh(refresher).finally(() => {\n                    refresher.complete();\n                });\n            });\n        });\n    }\n\n    /**\n     * The completion of any of the modules have changed.\n     */\n    onCompletionChange(): void {\n        this.invalidateData().finally(() => {\n            this.refreshAfterCompletionChange();\n        });\n    }\n\n    /**\n     * Invalidate the data.\n     */\n    protected invalidateData(): Promise<any> {\n        const promises = [];\n\n        promises.push(this.courseProvider.invalidateSections(this.course.id));\n        promises.push(this.coursesProvider.invalidateUserCourses());\n        promises.push(this.courseFormatDelegate.invalidateData(this.course, this.sections));\n\n        if (this.sections) {\n            promises.push(this.prefetchDelegate.invalidateCourseUpdates(this.course.id));\n        }\n\n        return Promise.all(promises);\n    }\n\n    /**\n     * Refresh list after a completion change since there could be new activities.\n     */\n    protected refreshAfterCompletionChange(): void {\n        // Save scroll position to restore it once done.\n        const scrollElement = this.content.getScrollElement(),\n            scrollTop = scrollElement.scrollTop || 0,\n            scrollLeft = scrollElement.scrollLeft || 0;\n\n        this.dataLoaded = false;\n        this.content.scrollToTop(); // Scroll top so the spinner is seen.\n\n        this.loadData().finally(() => {\n            this.dataLoaded = true;\n            this.content.scrollTo(scrollLeft, scrollTop);\n        });\n    }\n\n    /**\n     * Determines the prefetch icon of the course.\n     *\n     * @return {Promise<void>} Promise resolved when done.\n     */\n    protected determineCoursePrefetchIcon(): Promise<void> {\n        return this.courseHelper.getCourseStatusIcon(this.course.id).then((icon) => {\n            this.prefetchCourseData.prefetchCourseIcon = icon;\n        });\n    }\n\n    /**\n     * Prefetch the whole course.\n     */\n    prefetchCourse(): void {\n        this.courseHelper.confirmAndPrefetchCourse(this.prefetchCourseData, this.course, this.sections, this.courseHandlers)\n            .then((downloaded) => {\n                if (downloaded && this.downloadEnabled) {\n                    // Recalculate the status.\n                    this.courseHelper.calculateSectionsStatus(this.sections, this.course.id).catch(() => {\n                        // Ignore errors (shouldn't happen).\n                    });\n                }\n            }).catch((error) => {\n                if (!this.isDestroyed) {\n                    this.domUtils.showErrorModalDefault(error, 'core.course.errordownloadingcourse', true);\n                }\n            });\n    }\n\n    /**\n     * Toggle download enabled.\n     */\n    toggleDownload(): void {\n        this.downloadEnabled = !this.downloadEnabled;\n        this.downloadEnabledIcon = this.downloadEnabled ? 'checkbox-outline' : 'square-outline';\n    }\n\n    /**\n     * Page destroyed.\n     */\n    ngOnDestroy(): void {\n        this.isDestroyed = true;\n        if (this.completionObserver) {\n            this.completionObserver.off();\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/course/pages/section/section.ts"],"sourceRoot":""}