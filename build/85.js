webpackJsonp([85],{1765:function(n,l,u){"use strict";function t(n){return L._57(0,[(n()(),L._31(0,0,null,null,5,"ion-note",[["float-right",""],["padding-left",""]],null,null,null,null,null)),L._30(1,16384,null,0,Mn.a,[bn.a,L.t,L.V],null,null),(n()(),L._31(2,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),L._30(3,147456,null,0,Un.a,[bn.a,L.t,L.V],{name:[0,"name"]},null),(n()(),L._55(4,null,[" ",""])),L._47(131072,Rn.a,[Cn.a,L.j])],function(n,l){n(l,3,0,"time")},function(n,l){n(l,2,0,L._44(l,3)._hidden);n(l,4,0,L._56(l,4,0,L._44(l,5).transform("core.notsent")))})}function o(n){return L._57(0,[(n()(),L._31(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),L._31(1,0,null,null,1,"ion-icon",[["name","record"],["role","img"]],[[2,"hide",null]],null,null,null,null)),L._30(2,147456,null,0,Un.a,[bn.a,L.t,L.V],{name:[0,"name"]},null),(n()(),L._55(3,null,[" ",""])),L._47(131072,Rn.a,[Cn.a,L.j])],function(n,l){n(l,2,0,"record")},function(n,l){n(l,1,0,L._44(l,2)._hidden);n(l,3,0,L._56(l,3,0,L._44(l,4).transform("addon.mod_forum.unread")))})}function e(n){return L._57(0,[(n()(),L._31(0,0,null,null,6,"ion-note",[["float-right",""],["padding-left",""]],null,null,null,null,null)),L._30(1,16384,null,0,Mn.a,[bn.a,L.t,L.V],null,null),(n()(),L._55(2,null,["\n            ","\n            "])),L._49(3,1),(n()(),L._26(16777216,null,null,1,null,o)),L._30(5,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n        "]))],function(n,l){n(l,5,0,l.component.unread)},function(n,l){var u=l.component;n(l,2,0,L._56(l,2,0,n(l,3,0,L._44(l.parent,0),u.post.modified)))})}function a(n){return L._57(0,[(n()(),L._31(0,0,null,null,1,"core-file",[],null,null,null,Nn.b,Nn.a)),L._30(1,245760,null,0,$n.a,[$.a,q.a,H.a,xn.a,F.a,Hn.a,qn.a,N.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(n,l){var u=l.component;n(l,1,0,l.parent.context.$implicit,u.component,u.componentId)},null)}function i(n){return L._57(0,[(n()(),L._31(0,0,null,null,1,"core-local-file",[],null,null,null,Yn.b,Yn.a)),L._30(1,114688,null,0,zn.a,[qn.a,q.a,Cn.a,kn.a,Wn.a,H.a],{file:[0,"file"]},null)],function(n,l){n(l,1,0,l.parent.context.$implicit)},null)}function r(n){return L._57(0,[(n()(),L._31(0,0,null,null,9,"div",[],null,null,null,null,null)),(n()(),L._55(-1,null,["\n        "])),(n()(),L._55(-1,null,["\n        "])),(n()(),L._26(16777216,null,null,1,null,a)),L._30(4,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n        "])),(n()(),L._55(-1,null,["\n        "])),(n()(),L._26(16777216,null,null,1,null,i)),L._30(8,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n    "]))],function(n,l){n(l,4,0,!l.context.$implicit.name);n(l,8,0,l.context.$implicit.name)},null)}function s(n){return L._57(0,[(n()(),L._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-right",""]],null,null,null,Bn.b,Bn.a)),L._30(1,1097728,null,3,Gn.a,[Jn.a,bn.a,L.t,L.V,[2,Kn.a]],null,null),L._52(335544320,4,{contentLabel:0}),L._52(603979776,5,{_buttons:1}),L._52(603979776,6,{_icons:1}),L._30(5,16384,null,0,Qn.a,[],null,null),(n()(),L._55(-1,2,["\n    "])),(n()(),L._31(7,0,null,2,6,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],[[1,"aria-controls",0],[1,"aria-expanded",0]],[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.showReply()&&t}return t},Xn.b,Xn.a)),L._30(8,1097728,[[5,4]],0,Zn.a,[[8,""],bn.a,L.t,L.V],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),L._55(-1,0,["\n        "])),(n()(),L._31(10,0,null,0,1,"ion-icon",[["name","undo"],["role","img"]],[[2,"hide",null]],null,null,null,null)),L._30(11,147456,null,0,Un.a,[bn.a,L.t,L.V],{name:[0,"name"]},null),(n()(),L._55(12,0,[" ","\n    "])),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,2,["\n"]))],function(n,l){n(l,8,0,"","");n(l,11,0,"undo")},function(n,l){var u=l.component;n(l,7,0,"addon-forum-reply-edit-form-"+u.uniqueId,u.replyData.replyingTo===u.post.id);n(l,10,0,L._44(l,11)._hidden);n(l,12,0,L._56(l,12,0,L._44(l,13).transform("addon.mod_forum.reply")))})}function c(n){return L._57(0,[(n()(),L._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-right",""]],null,null,null,Bn.b,Bn.a)),L._30(1,1097728,null,3,Gn.a,[Jn.a,bn.a,L.t,L.V,[2,Kn.a]],null,null),L._52(335544320,7,{contentLabel:0}),L._52(603979776,8,{_buttons:1}),L._52(603979776,9,{_icons:1}),L._30(5,16384,null,0,Qn.a,[],null,null),(n()(),L._55(-1,2,["\n    "])),(n()(),L._31(7,0,null,2,6,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],[[1,"aria-controls",0],[1,"aria-expanded",0]],[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.editReply()&&t}return t},Xn.b,Xn.a)),L._30(8,1097728,[[8,4]],0,Zn.a,[[8,""],bn.a,L.t,L.V],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),L._55(-1,0,["\n        "])),(n()(),L._31(10,0,null,0,1,"ion-icon",[["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),L._30(11,147456,null,0,Un.a,[bn.a,L.t,L.V],{name:[0,"name"]},null),(n()(),L._55(12,0,[" ","\n    "])),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,2,["\n"]))],function(n,l){n(l,8,0,"","");n(l,11,0,"create")},function(n,l){var u=l.component;n(l,7,0,"addon-forum-reply-edit-form-"+u.uniqueId,u.replyData.replyingTo===u.post.parent);n(l,10,0,L._44(l,11)._hidden);n(l,12,0,L._56(l,12,0,L._44(l,13).transform("addon.mod_forum.edit")))})}function _(n){return L._57(0,[(n()(),L._31(0,0,null,null,1,"core-attachments",[],null,null,null,nl.b,nl.a)),L._30(1,114688,null,0,ll.a,[F.a,H.a,kn.a,Y.a,Cn.a,ul.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"]},null)],function(n,l){var u=l.component;n(l,1,0,u.replyData.files,u.forum.maxbytes,u.forum.maxattachments,u.component,u.forum.cmid,!0)},null)}function d(n){return L._57(0,[(n()(),L._31(0,0,null,null,11,"ion-row",[["class","row"]],null,null,null,null,null)),L._30(1,16384,null,0,tl.a,[],null,null),(n()(),L._55(-1,null,["\n            "])),(n()(),L._31(3,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),L._30(4,16384,null,0,ol.a,[],null,null),(n()(),L._55(-1,null,["\n                "])),(n()(),L._31(6,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.discard()&&t}return t},Xn.b,Xn.a)),L._30(7,1097728,null,0,Zn.a,[[8,""],bn.a,L.t,L.V],{color:[0,"color"],block:[1,"block"]},null),(n()(),L._55(8,0,["",""])),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,null,["\n            "])),(n()(),L._55(-1,null,["\n        "]))],function(n,l){n(l,7,0,"light","")},function(n,l){n(l,8,0,L._56(l,8,0,L._44(l,9).transform("core.discard")))})}function f(n){return L._57(0,[(n()(),L._31(0,0,null,null,71,"ion-list",[],[[8,"id",0]],null,null,null,null)),L._30(1,16384,null,0,el.a,[bn.a,L.t,L.V,Dn.a,al.l,il.a],null,null),(n()(),L._55(-1,null,["\n    "])),(n()(),L._31(3,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,Bn.b,Bn.a)),L._30(4,1097728,null,3,Gn.a,[Jn.a,bn.a,L.t,L.V,[2,Kn.a]],null,null),L._52(335544320,10,{contentLabel:0}),L._52(603979776,11,{_buttons:1}),L._52(603979776,12,{_icons:1}),L._30(8,16384,null,0,Qn.a,[],null,null),(n()(),L._55(-1,2,["\n        "])),(n()(),L._31(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),L._30(11,16384,[[10,4]],0,rl.a,[bn.a,L.t,L.V,[8,null],[8,""],[8,null],[8,null]],null,null),(n()(),L._55(12,null,["",""])),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,2,["\n        "])),(n()(),L._31(15,0,null,3,5,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,u){var t=!0;if("ngModelChange"===l){t=!1!==(n.component.replyData.subject=u)&&t}return t},sl.b,sl.a)),L._30(16,671744,null,0,cl.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),L._50(2048,null,cl.m,null,[cl.q]),L._30(18,16384,null,0,cl.n,[cl.m],null,null),L._30(19,5423104,null,0,_l.a,[bn.a,Dn.a,Jn.a,dl.a,L.t,L.V,[2,wn.a],[2,Gn.a],[2,cl.m],il.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,2,["\n    "])),(n()(),L._55(-1,null,["\n    "])),(n()(),L._31(23,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,Bn.b,Bn.a)),L._30(24,1097728,null,3,Gn.a,[Jn.a,bn.a,L.t,L.V,[2,Kn.a]],null,null),L._52(335544320,13,{contentLabel:0}),L._52(603979776,14,{_buttons:1}),L._52(603979776,15,{_icons:1}),L._30(28,16384,null,0,Qn.a,[],null,null),(n()(),L._55(-1,2,["\n        "])),(n()(),L._31(30,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),L._30(31,16384,[[13,4]],0,rl.a,[bn.a,L.t,L.V,[8,null],[8,""],[8,null],[8,null]],null,null),(n()(),L._55(32,null,["",""])),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,2,["\n        "])),(n()(),L._31(35,0,null,3,2,"core-rich-text-editor",[["item-content",""]],null,[[null,"contentChanged"]],function(n,l,u){var t=!0;if("contentChanged"===l){t=!1!==n.component.onMessageChange(u)&&t}return t},fl.b,fl.a)),L._30(36,1228800,null,0,ml.a,[H.a,pl.a,jn.a,$.a,xn.a,[2,wn.a],L.t],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"]},{contentChanged:"contentChanged"}),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,2,["\n    "])),(n()(),L._55(-1,null,["\n    "])),(n()(),L._26(16777216,null,null,1,null,_)),L._30(41,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n    "])),(n()(),L._31(43,0,null,null,27,"ion-grid",[["class","grid"]],null,null,null,null,null)),L._30(44,16384,null,0,hl.a,[],null,null),(n()(),L._55(-1,null,["\n        "])),(n()(),L._31(46,0,null,null,20,"ion-row",[["class","row"]],null,null,null,null,null)),L._30(47,16384,null,0,tl.a,[],null,null),(n()(),L._55(-1,null,["\n            "])),(n()(),L._31(49,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),L._30(50,16384,null,0,ol.a,[],null,null),(n()(),L._55(-1,null,["\n                "])),(n()(),L._31(52,0,null,null,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.reply()&&t}return t},Xn.b,Xn.a)),L._30(53,1097728,null,0,Zn.a,[[8,""],bn.a,L.t,L.V],{block:[0,"block"]},null),(n()(),L._55(54,0,["",""])),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,null,["\n            "])),(n()(),L._55(-1,null,["\n            "])),(n()(),L._31(58,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),L._30(59,16384,null,0,ol.a,[],null,null),(n()(),L._55(-1,null,["\n                "])),(n()(),L._31(61,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.cancel()&&t}return t},Xn.b,Xn.a)),L._30(62,1097728,null,0,Zn.a,[[8,""],bn.a,L.t,L.V],{color:[0,"color"],block:[1,"block"]},null),(n()(),L._55(63,0,["",""])),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,null,["\n            "])),(n()(),L._55(-1,null,["\n        "])),(n()(),L._55(-1,null,["\n        "])),(n()(),L._26(16777216,null,null,1,null,d)),L._30(69,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n    "])),(n()(),L._55(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,16,0,u.replyData.subject);n(l,19,0,"text",L._56(l,19,1,L._44(l,20).transform("addon.mod_forum.subject")));n(l,36,0,L._56(l,36,0,L._44(l,37).transform("addon.mod_forum.message")),u.messageControl,"mod_forum_reply_"+u.post.id,u.component,u.componentId);n(l,41,0,u.forum.id&&u.forum.maxattachments>0);n(l,53,0,"");n(l,62,0,"light","");n(l,69,0,u.replyData.isEditing)},function(n,l){var u=l.component;n(l,0,0,"addon-forum-reply-edit-form-"+u.uniqueId);n(l,12,0,L._56(l,12,0,L._44(l,13).transform("addon.mod_forum.subject")));n(l,15,0,L._44(l,18).ngClassUntouched,L._44(l,18).ngClassTouched,L._44(l,18).ngClassPristine,L._44(l,18).ngClassDirty,L._44(l,18).ngClassValid,L._44(l,18).ngClassInvalid,L._44(l,18).ngClassPending);n(l,32,0,L._56(l,32,0,L._44(l,33).transform("addon.mod_forum.message")));n(l,52,0,""==u.replyData.subject||null==u.replyData.message);n(l,54,0,L._56(l,54,0,L._44(l,55).transform("addon.mod_forum.posttoforum")));n(l,63,0,L._56(l,63,0,L._44(l,64).transform("core.cancel")))})}function m(n){return L._57(0,[L._47(0,gl.a,[On.a,Cn.a]),(n()(),L._31(1,0,null,null,28,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Bn.b,Bn.a)),L._30(2,1097728,null,3,Gn.a,[Jn.a,bn.a,L.t,L.V,[2,Kn.a]],null,null),L._52(335544320,1,{contentLabel:0}),L._52(603979776,2,{_buttons:1}),L._52(603979776,3,{_icons:1}),L._30(6,16384,null,0,Qn.a,[],null,null),(n()(),L._55(-1,2,["\n    "])),(n()(),L._31(8,0,null,0,7,"ion-avatar",[["item-start",""]],null,[[null,"click"]],function(n,l,u){var t=!0,o=n.component;if("click"===l){t=!1!==o.openUserProfile(o.post.userid)&&t}return t},null,null)),L._30(9,16384,null,0,Il.a,[],null,null),(n()(),L._55(-1,null,["\n        "])),(n()(),L._31(11,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),L._30(12,4210688,null,0,bl.a,[L.t,On.a,xn.a,Dn.a,$.a,H.a,jn.a,F.a],null,null),L._48(13,{$a:0}),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,null,["\n    "])),(n()(),L._55(-1,2,["\n    "])),(n()(),L._31(17,0,null,2,2,"h2",[],null,null,null,null,null)),(n()(),L._31(18,0,null,null,1,"span",[],[[2,"core-bold",null]],null,null,null,null)),(n()(),L._55(19,null,["",""])),(n()(),L._55(-1,2,["\n    "])),(n()(),L._31(21,0,null,2,7,"p",[],null,null,null,null,null)),(n()(),L._55(-1,null,["\n        "])),(n()(),L._26(16777216,null,null,1,null,t)),L._30(24,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n        "])),(n()(),L._26(16777216,null,null,1,null,e)),L._30(27,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(28,null,["\n        ","\n    "])),(n()(),L._55(-1,2,["\n"])),(n()(),L._55(-1,null,["\n"])),(n()(),L._31(31,0,null,null,8,"ion-card-content",[],null,null,null,null,null)),L._30(32,16384,null,0,vl.a,[bn.a,L.t,L.V],null,null),(n()(),L._55(-1,null,["\n    "])),(n()(),L._31(34,0,null,null,1,"core-format-text",[],null,null,null,null,null)),L._30(35,540672,null,0,Pn.a,[L.t,$.a,H.a,kn.a,Cn.a,Dn.a,q.a,jn.a,On.a,xn.a,F.a,Sn.a,[2,Vn.a],[2,wn.a]],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(n()(),L._55(-1,null,["\n    "])),(n()(),L._26(16777216,null,null,1,null,r)),L._30(38,802816,null,0,Fn.j,[L._11,L._6,L.E],{ngForOf:[0,"ngForOf"]},null),(n()(),L._55(-1,null,["\n"])),(n()(),L._55(-1,null,["\n"])),(n()(),L._26(16777216,null,null,1,null,s)),L._30(42,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n"])),(n()(),L._26(16777216,null,null,1,null,c)),L._30(45,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n"])),(n()(),L._26(16777216,null,null,1,null,f)),L._30(48,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,24,0,!u.post.modified);n(l,27,0,u.post.modified);n(l,35,0,u.post.message,u.component,u.componentId);n(l,38,0,u.post.attachments);n(l,42,0,u.post.id&&u.post.canreply);n(l,45,0,!(u.post.id||u.replyData.isEditing&&u.replyData.replyingTo==u.post.parent));n(l,48,0,u.post.id&&!u.replyData.isEditing&&u.replyData.replyingTo==u.post.id||!u.post.id&&u.replyData.isEditing&&u.replyData.replyingTo==u.post.parent)},function(n,l){var u=l.component;n(l,11,0,u.post.userpictureurl,L._56(l,11,1,L._44(l,14).transform("core.pictureof",n(l,13,0,u.post.userfullname))));n(l,18,0,0==u.post.parent);n(l,19,0,u.post.subject);n(l,28,0,u.post.userfullname)})}function p(n){return L._57(0,[(n()(),L._31(0,0,null,null,3,"ion-title",[],null,null,null,gn.b,gn.a)),L._30(1,49152,null,0,In.a,[bn.a,L.t,L.V,[2,vn.a],[2,yn.a]],null,null),(n()(),L._31(2,0,null,0,1,"core-format-text",[],null,null,null,null,null)),L._30(3,540672,null,0,Pn.a,[L.t,$.a,H.a,kn.a,Cn.a,Dn.a,q.a,jn.a,On.a,xn.a,F.a,Sn.a,[2,Vn.a],[2,wn.a]],{text:[0,"text"]},null)],function(n,l){n(l,3,0,l.component.discussion.subject)},null)}function h(n){return L._57(0,[(n()(),L._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,u){var t=!0;if("action"===l){t=!1!==n.component.doRefresh(null,u)&&t}return t},Ln.b,Ln.a)),L._30(1,770048,null,0,Tn.a,[En.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),L._47(131072,Rn.a,[Cn.a,L.j])],function(n,l){var u=l.component;n(l,1,0,L._56(l,1,0,L._44(l,2).transform("addon.mod_forum.refreshposts")),u.refreshIcon,!1,650)},null)}function g(n){return L._57(0,[(n()(),L._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,u){var t=!0;if("action"===l){t=!1!==n.component.doRefresh(null,u,!0)&&t}return t},Ln.b,Ln.a)),L._30(1,770048,null,0,Tn.a,[En.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),L._47(131072,Rn.a,[Cn.a,L.j])],function(n,l){var u=l.component;n(l,1,0,L._56(l,1,0,L._44(l,2).transform("core.settings.synchronizenow")),u.syncIcon,!1,550)},null)}function I(n){return L._57(0,[(n()(),L._31(0,0,null,null,7,"ion-card",[["class","core-warning-card"]],null,null,null,null,null)),L._30(1,16384,null,0,An.a,[bn.a,L.t,L.V],null,null),(n()(),L._55(-1,null,["\n            "])),(n()(),L._31(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),L._30(4,147456,null,0,Un.a,[bn.a,L.t,L.V],{name:[0,"name"]},null),(n()(),L._55(5,null,[" ","\n        "])),L._48(6,{$a:0}),L._47(131072,Rn.a,[Cn.a,L.j])],function(n,l){n(l,4,0,"warning")},function(n,l){var u=l.component;n(l,3,0,L._44(l,4)._hidden);n(l,5,0,L._56(l,5,0,L._44(l,7).transform("core.hasdatatosync",n(l,6,0,u.discussionStr))))})}function b(n){return L._57(0,[(n()(),L._31(0,0,null,null,6,"ion-card",[["class","core-warning-card"]],null,null,null,null,null)),L._30(1,16384,null,0,An.a,[bn.a,L.t,L.V],null,null),(n()(),L._55(-1,null,["\n            "])),(n()(),L._31(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),L._30(4,147456,null,0,Un.a,[bn.a,L.t,L.V],{name:[0,"name"]},null),(n()(),L._55(5,null,[" ","\n        "])),L._47(131072,Rn.a,[Cn.a,L.j])],function(n,l){n(l,4,0,"warning")},function(n,l){n(l,3,0,L._44(l,4)._hidden);n(l,5,0,L._56(l,5,0,L._44(l,6).transform("addon.mod_forum.discussionlocked")))})}function v(n){return L._57(0,[(n()(),L._31(0,0,null,null,5,"ion-card",[["margin-bottom",""]],null,null,null,null,null)),L._30(1,16384,null,0,An.a,[bn.a,L.t,L.V],null,null),(n()(),L._55(-1,null,["\n            "])),(n()(),L._31(3,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var t=!0;if("onPostChange"===l){t=!1!==n.component.postListChanged()&&t}return t},m,kl)),L._30(4,245760,null,0,yl.a,[Vn.a,Y.a,Pl.a,H.a,kn.a,Cn.a,W.a,G.a,B.a,J.a,[2,z.a]],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],defaultSubject:[9,"defaultSubject"]},{onPostChange:"onPostChange"}),(n()(),L._55(-1,null,["\n        "]))],function(n,l){var u=l.component;n(l,4,0,u.discussion,u.courseId,u.discussionId,u.component,u.componentId,u.replyData,u.originalData,u.trackPosts,u.forum,u.defaultSubject)},null)}function y(n){return L._57(0,[(n()(),L._31(0,0,null,null,5,"ion-item-divider",[["class","item item-divider"],["color","light"]],null,null,null,Bn.b,Bn.a)),L._30(1,1097728,null,3,Gn.a,[Jn.a,bn.a,L.t,L.V,[2,Kn.a]],{color:[0,"color"]},null),L._52(335544320,4,{contentLabel:0}),L._52(603979776,5,{_buttons:1}),L._52(603979776,6,{_icons:1}),L._30(5,16384,null,0,Cl.a,[bn.a,L.t,L.V],{color:[0,"color"]},null)],function(n,l){n(l,1,0,"light");n(l,5,0,"light")},null)}function P(n){return L._57(0,[(n()(),L._31(0,0,null,null,7,null,null,null,null,null,null,null)),(n()(),L._55(-1,null,["\n                "])),(n()(),L._26(16777216,null,null,1,null,y)),L._30(3,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n                "])),(n()(),L._31(5,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var t=!0;if("onPostChange"===l){t=!1!==n.component.postListChanged()&&t}return t},m,kl)),L._30(6,245760,null,0,yl.a,[Vn.a,Y.a,Pl.a,H.a,kn.a,Cn.a,W.a,G.a,B.a,J.a,[2,z.a]],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],defaultSubject:[9,"defaultSubject"]},{onPostChange:"onPostChange"}),(n()(),L._55(-1,null,["\n            "]))],function(n,l){var u=l.component;n(l,3,0,!l.context.first);n(l,6,0,l.context.$implicit,u.courseId,u.discussionId,u.component,u.componentId,u.replyData,u.originalData,u.trackPosts,u.forum,u.defaultSubject)},null)}function k(n){return L._57(0,[(n()(),L._31(0,0,null,null,5,"ion-card",[],null,null,null,null,null)),L._30(1,16384,null,0,An.a,[bn.a,L.t,L.V],null,null),(n()(),L._55(-1,null,["\n            "])),(n()(),L._26(16777216,null,null,1,null,P)),L._30(4,802816,null,0,Fn.j,[L._11,L._6,L.E],{ngForOf:[0,"ngForOf"]},null),(n()(),L._55(-1,null,["\n        "]))],function(n,l){n(l,4,0,l.component.posts)},null)}function C(n){return L._57(0,[(n()(),L._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function D(n){return L._57(0,[(n()(),L._31(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),L._55(-1,null,["\n                "])),(n()(),L._26(16777216,null,null,2,null,C)),L._30(3,540672,null,0,Fn.r,[L._11],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),L._48(4,{post:0}),(n()(),L._55(-1,null,["\n            "]))],function(n,l){n(l,3,0,n(l,4,0,l.context.$implicit),L._44(l.parent.parent,75))},null)}function j(n){return L._57(0,[(n()(),L._31(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),L._55(-1,null,["\n            "])),(n()(),L._26(16777216,null,null,1,null,D)),L._30(3,802816,null,0,Fn.j,[L._11,L._6,L.E],{ngForOf:[0,"ngForOf"]},null),(n()(),L._55(-1,null,["\n        "]))],function(n,l){n(l,3,0,l.component.posts)},null)}function O(n){return L._57(0,[(n()(),L._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function x(n){return L._57(0,[(n()(),L._31(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),L._55(-1,null,["\n                    "])),(n()(),L._26(16777216,null,null,2,null,O)),L._30(3,540672,null,0,Fn.r,[L._11],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),L._48(4,{post:0}),(n()(),L._55(-1,null,["\n                "]))],function(n,l){n(l,3,0,n(l,4,0,l.context.$implicit),L._44(l.parent.parent.parent,75))},null)}function S(n){return L._57(0,[(n()(),L._31(0,0,null,null,4,"div",[["padding-left",""]],null,null,null,null,null)),(n()(),L._55(-1,null,["\n                "])),(n()(),L._26(16777216,null,null,1,null,x)),L._30(3,802816,null,0,Fn.j,[L._11,L._6,L.E],{ngForOf:[0,"ngForOf"]},null),(n()(),L._55(-1,null,["\n            "]))],function(n,l){n(l,3,0,l.parent.context.post.children)},null)}function V(n){return L._57(0,[(n()(),L._55(-1,null,["\n            "])),(n()(),L._31(1,0,null,null,5,"ion-card",[],null,null,null,null,null)),L._30(2,16384,null,0,An.a,[bn.a,L.t,L.V],null,null),(n()(),L._55(-1,null,["\n                "])),(n()(),L._31(4,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var t=!0;if("onPostChange"===l){t=!1!==n.component.postListChanged()&&t}return t},m,kl)),L._30(5,245760,null,0,yl.a,[Vn.a,Y.a,Pl.a,H.a,kn.a,Cn.a,W.a,G.a,B.a,J.a,[2,z.a]],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],defaultSubject:[9,"defaultSubject"]},{onPostChange:"onPostChange"}),(n()(),L._55(-1,null,["\n            "])),(n()(),L._55(-1,null,["\n            "])),(n()(),L._26(16777216,null,null,1,null,S)),L._30(9,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,null,["\n        "]))],function(n,l){var u=l.component;n(l,5,0,l.context.post,u.courseId,u.discussionId,u.component,u.componentId,u.replyData,u.originalData,u.trackPosts,u.forum,u.defaultSubject);n(l,9,0,l.context.post.children.length&&l.context.post.children[0].subject)},null)}function w(n){return L._57(0,[L._52(402653184,1,{content:0}),(n()(),L._31(1,0,null,null,15,"ion-header",[],null,null,null,null,null)),L._30(2,16384,null,0,Dl.a,[bn.a,L.t,L.V,[2,jl.a]],null,null),(n()(),L._55(-1,null,["\n    "])),(n()(),L._31(4,0,null,null,11,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Ol.b,Ol.a)),L._30(5,49152,null,0,yn.a,[dl.a,[2,jl.a],[2,Vn.a],bn.a,L.t,L.V],null,null),(n()(),L._55(-1,3,["\n        "])),(n()(),L._26(16777216,null,3,1,null,p)),L._30(8,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,3,["\n        "])),(n()(),L._31(10,0,null,2,4,"ion-buttons",[["end",""]],null,null,null,null,null)),L._30(11,16384,null,1,xl.a,[bn.a,L.t,L.V,[2,vn.a],[2,yn.a]],null,null),L._52(603979776,2,{_buttons:1}),(n()(),L._55(-1,null,["\n            "])),(n()(),L._55(-1,null,["\n        "])),(n()(),L._55(-1,3,["\n    "])),(n()(),L._55(-1,null,["\n"])),(n()(),L._55(-1,null,["\n"])),(n()(),L._31(18,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,Sl.b,Sl.a)),L._30(19,245760,null,1,Vl.a,[L.t,On.a,H.a],null,null),L._52(603979776,3,{buttons:1}),(n()(),L._55(-1,0,["\n    "])),(n()(),L._31(22,0,null,0,20,"core-context-menu",[],null,null,null,wl.b,wl.a)),L._30(23,245760,null,0,En.a,[Cn.a,Ll.a,L.t,H.a,[2,Tl.a]],null,null),(n()(),L._55(-1,0,["\n        "])),(n()(),L._26(16777216,null,0,1,null,h)),L._30(26,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,0,["\n        "])),(n()(),L._26(16777216,null,0,1,null,g)),L._30(29,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,0,["\n        "])),(n()(),L._31(31,0,null,0,2,"core-context-menu-item",[["iconAction","arrow-round-down"]],null,[[null,"action"]],function(n,l,u){var t=!0;if("action"===l){t=!1!==n.component.changeSort("flat-oldest")&&t}return t},Ln.b,Ln.a)),L._30(32,770048,null,0,Tn.a,[En.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,0,["\n        "])),(n()(),L._31(35,0,null,0,2,"core-context-menu-item",[["iconAction","arrow-round-up"]],null,[[null,"action"]],function(n,l,u){var t=!0;if("action"===l){t=!1!==n.component.changeSort("flat-newest")&&t}return t},Ln.b,Ln.a)),L._30(36,770048,null,0,Tn.a,[En.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,0,["\n        "])),(n()(),L._31(39,0,null,0,2,"core-context-menu-item",[["iconAction","swap"]],null,[[null,"action"]],function(n,l,u){var t=!0;if("action"===l){t=!1!==n.component.changeSort("nested")&&t}return t},Ln.b,Ln.a)),L._30(40,770048,null,0,Tn.a,[En.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,0,["\n    "])),(n()(),L._55(-1,0,["\n"])),(n()(),L._55(-1,null,["\n"])),(n()(),L._31(45,0,null,null,32,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,El.b,El.a)),L._30(46,4374528,[[1,4]],0,wn.a,[bn.a,Dn.a,il.a,L.t,L.V,dl.a,Rl.a,L.M,[2,jl.a],[2,Vn.a]],null,null),(n()(),L._55(-1,1,["\n    "])),(n()(),L._31(48,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,u){var t=!0;if("ionRefresh"===l){t=!1!==n.component.doRefresh(u)&&t}return t},null,null)),L._30(49,212992,null,0,Al.a,[Dn.a,wn.a,L.M,al.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),L._55(-1,null,["\n        "])),(n()(),L._31(51,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ul.b,Ul.a)),L._30(52,114688,null,0,Ml.a,[Al.a,bn.a],{pullingText:[0,"pullingText"]},null),L._47(131072,Rn.a,[Cn.a,L.j]),(n()(),L._55(-1,null,["\n    "])),(n()(),L._55(-1,1,["\n\n    "])),(n()(),L._31(56,0,null,1,20,"core-loading",[],null,null,null,Fl.b,Fl.a)),L._30(57,638976,null,0,Nl.a,[Cn.a,L.t],{hideUntil:[0,"hideUntil"]},null),(n()(),L._55(-1,0,["\n        "])),(n()(),L._55(-1,0,["\n        "])),(n()(),L._26(16777216,null,0,1,null,I)),L._30(61,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,0,["\n\n        "])),(n()(),L._26(16777216,null,0,1,null,b)),L._30(64,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,0,["\n\n        "])),(n()(),L._26(16777216,null,0,1,null,v)),L._30(67,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,0,["\n\n        "])),(n()(),L._26(16777216,null,0,1,null,k)),L._30(70,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,0,["\n\n        "])),(n()(),L._26(16777216,null,0,1,null,j)),L._30(73,16384,null,0,Fn.k,[L._11,L._6],{ngIf:[0,"ngIf"]},null),(n()(),L._55(-1,0,["\n\n        "])),(n()(),L._26(0,[["nestedPosts",2]],0,0,null,V)),(n()(),L._55(-1,0,["\n    "])),(n()(),L._55(-1,1,["\n"])),(n()(),L._55(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,8,0,u.discussion),n(l,19,0),n(l,23,0);n(l,26,0,u.discussionLoaded&&!u.postHasOffline&&u.isOnline);n(l,29,0,u.discussionLoaded&&!u.isSplitViewOn&&u.postHasOffline&&u.isOnline);n(l,32,0,L._56(l,32,0,L._44(l,33).transform("addon.mod_forum.modeflatoldestfirst")),"arrow-round-down",500,"flat-oldest"==u.sort);n(l,36,0,L._56(l,36,0,L._44(l,37).transform("addon.mod_forum.modeflatnewestfirst")),"arrow-round-up",450,"flat-newest"==u.sort);n(l,40,0,L._56(l,40,0,L._44(l,41).transform("addon.mod_forum.modenested")),"swap",400,"nested"==u.sort);n(l,49,0,u.discussionLoaded);n(l,52,0,L._34(1,"",L._56(l,52,0,L._44(l,53).transform("core.pulltorefresh")),""));n(l,57,0,u.discussionLoaded);n(l,61,0,u.postHasOffline);n(l,64,0,u.locked);n(l,67,0,u.discussion);n(l,70,0,"nested"!=u.sort);n(l,73,0,"nested"==u.sort)},function(n,l){n(l,4,0,L._44(l,5)._hidden,L._44(l,5)._sbPadding);n(l,45,0,L._44(l,46).statusbarPadding,L._44(l,46)._hasRefresher);n(l,48,0,"inactive"!==L._44(l,49).state,L._44(l,49)._top);n(l,51,0,L._44(l,52).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var L=u(0),T=u(9),E=u(7),R=u(31),A=u(30),U=u(630),M=u(189),F=u(12),N=u(21),$=u(1),H=u(6),q=u(4),Y=u(74),z=u(128),W=u(155),B=u(190),G=u(232),J=u(233),K=this&&this.__decorate||function(n,l,u,t){var o,e=arguments.length,a=e<3?l:null===t?t=Object.getOwnPropertyDescriptor(l,u):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,l,u,t);else for(var i=n.length-1;i>=0;i--)(o=n[i])&&(a=(e<3?o(a):e>3?o(l,u,a):o(l,u))||a);return e>3&&a&&Object.defineProperty(l,u,a),a},Q=this&&this.__metadata||function(n,l){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,l)},X=this&&this.__param||function(n,l){return function(u,t){l(u,t,n)}},Z=function(){function n(n,l,u,t,o,e,a,i,r,s,c,_,d,f){var m=this;this.appProvider=u,this.eventsProvider=t,this.sitesProvider=o,this.domUtils=e,this.utils=a,this.translate=i,this.uploaderProvider=r,this.forumProvider=s,this.forumOffline=c,this.forumHelper=_,this.forumSync=d,this.svComponent=f,this.discussionLoaded=!1,this.sort="flat-oldest",this.replyData={replyingTo:0,isEditing:!1,subject:"",message:null,files:[]},this.originalData={subject:null,message:null,files:[]},this.refreshIcon="spinner",this.syncIcon="spinner",this.courseId=n.get("courseId"),this.cmId=n.get("cmId"),this.forumId=n.get("forumId"),this.discussionId=n.get("discussionId"),this.trackPosts=n.get("trackPosts"),this.locked=n.get("locked"),this.isOnline=this.appProvider.isOnline(),this.onlineObserver=l.onchange().subscribe(function(n){m.isOnline=m.appProvider.isOnline()}),this.isSplitViewOn=this.svComponent&&this.svComponent.isOn()}return n.prototype.ionViewDidLoad=function(){this.fetchPosts(!0,!1,!0)},n.prototype.ionViewDidEnter=function(){var n=this;this.syncObserver=this.eventsProvider.on(J.a.AUTO_SYNCED,function(l){l.forumId==n.forumId&&n.discussionId==l.discussionId&&l.userId==n.sitesProvider.getCurrentSiteUserId()&&(n.discussionLoaded=!1,n.refreshPosts())},this.sitesProvider.getCurrentSiteId()),this.syncManualObserver=this.eventsProvider.on(J.a.MANUAL_SYNCED,function(l){"discussion"!=l.source&&l.forumId==n.forumId&&l.userId==n.sitesProvider.getCurrentSiteUserId()&&(n.discussionLoaded=!1,n.refreshPosts())},this.sitesProvider.getCurrentSiteId()),this.eventsProvider.trigger(W.a.VIEW_DISCUSSION_EVENT,{forumId:this.forumId,discussion:this.discussionId},this.sitesProvider.getCurrentSiteId())},n.prototype.ionViewCanLeave=function(){var n=this;return(this.forumHelper.hasPostDataChanged(this.replyData,this.originalData)?this.domUtils.showConfirm(this.translate.instant("core.confirmcanceledit")):Promise.resolve()).then(function(){n.uploaderProvider.clearTmpFiles(n.replyData.files)})},n.prototype.fetchForum=function(){return this.courseId&&this.cmId?this.forumProvider.getForum(this.courseId,this.cmId):this.courseId&&this.forumId?this.forumProvider.getForumById(this.courseId,this.forumId):Promise.reject(null)},n.prototype.fetchPosts=function(n,l,u){var t=this,o=[],e=[],a=!1;return(n?this.syncDiscussion(l).catch(function(){}):Promise.resolve()).then(function(){return t.forumProvider.getDiscussionPosts(t.discussionId).then(function(n){o=n}).then(function(){return t.forumOffline.getDiscussionReplies(t.discussionId).then(function(n){t.postHasOffline=!!n.length;var l=[],u={};return o.forEach(function(n){u[n.id]=n,a=a||!n.postread}),n.forEach(function(n){t.forumId||(t.forumId=n.forumid),t.courseId||(t.courseId=n.courseid),l.push(t.forumHelper.convertOfflineReplyToOnline(n).then(function(n){e.push(n),u[n.parent].canreply=!1}))}),Promise.all(l).then(function(){o=t.utils.objectToArray(u)})})})}).then(function(){var n=e.concat(o);if(t.discussion=t.forumProvider.extractStartingPost(n),"nested"==t.sort)t.forumProvider.sortDiscussionPosts(n,"ASC"),t.posts=t.utils.formatTree(n,"parent","id",t.discussion.id);else{t.forumProvider.sortDiscussionPosts(n,"flat-newest"==t.sort?"DESC":"ASC"),t.posts=n}return t.defaultSubject=t.translate.instant("addon.mod_forum.re")+" "+t.discussion.subject,t.replyData.subject=t.defaultSubject,t.fetchForum().then(function(n){t.discussion.userfullname&&0==t.discussion.parent&&"single"==n.type&&(t.discussion.userfullname=null),void 0!==n.istracked&&(t.trackPosts=n.istracked),t.forumId=n.id,t.cmId=n.cmid,t.forum=n}).catch(function(){t.forum={}})}).catch(function(n){t.domUtils.showErrorModal(n)}).finally(function(){t.discussionLoaded=!0,t.refreshIcon="refresh",t.syncIcon="sync",(u||a&&t.trackPosts)&&t.forumProvider.logDiscussionView(t.discussionId).catch(function(){})})},n.prototype.syncDiscussion=function(n){var l=this;return this.forumSync.syncDiscussionReplies(this.discussionId).then(function(n){return n.warnings&&n.warnings.length&&l.domUtils.showErrorModal(n.warnings[0]),n&&n.updated&&l.eventsProvider.trigger(J.a.MANUAL_SYNCED,{forumId:l.forumId,userId:l.sitesProvider.getCurrentSiteUserId(),source:"discussion"},l.sitesProvider.getCurrentSiteId()),n.updated}).catch(function(u){return n&&l.domUtils.showErrorModalDefault(u,"core.errorsync",!0),Promise.reject(null)})},n.prototype.doRefresh=function(n,l,u){return void 0===u&&(u=!1),this.discussionLoaded?this.refreshPosts(!0,u).finally(function(){n&&n.complete(),l&&l()}):Promise.resolve()},n.prototype.refreshPosts=function(n,l){var u=this;return this.content&&this.content.scrollToTop(),this.refreshIcon="spinner",this.syncIcon="spinner",this.forumProvider.invalidateDiscussionPosts(this.discussionId).catch(function(){}).then(function(){return u.fetchPosts(n,l)})},n.prototype.changeSort=function(n){return this.discussionLoaded=!1,this.sort=n,this.content&&this.content.scrollToTop(),this.fetchPosts()},n.prototype.postListChanged=function(){var n=this;this.eventsProvider.trigger(W.a.REPLY_DISCUSSION_EVENT,{forumId:this.forumId,discussionId:this.discussionId,cmId:this.cmId},this.sitesProvider.getCurrentSiteId()),this.discussionLoaded=!1,this.refreshPosts().finally(function(){n.discussionLoaded=!0})},n.prototype.ionViewWillLeave=function(){this.syncObserver&&this.syncObserver.off(),this.syncManualObserver&&this.syncManualObserver.off()},n.prototype.ngOnDestroy=function(){this.onlineObserver&&this.onlineObserver.unsubscribe()},K([Object(L._9)(T.f),Q("design:type",T.f)],n.prototype,"content",void 0),n=K([Object(L.m)({selector:"page-addon-mod-forum-discussion",templateUrl:"discussion.html"}),X(13,Object(L.N)()),Q("design:paramtypes",[T.r,M.a,F.a,N.a,$.a,H.a,q.a,E.c,Y.a,W.a,B.a,G.a,J.a,z.a])],n)}(),nn=this&&this.__decorate||function(n,l,u,t){var o,e=arguments.length,a=e<3?l:null===t?t=Object.getOwnPropertyDescriptor(l,u):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,l,u,t);else for(var i=n.length-1;i>=0;i--)(o=n[i])&&(a=(e<3?o(a):e>3?o(l,u,a):o(l,u))||a);return e>3&&a&&Object.defineProperty(l,u,a),a},ln=function(){function n(){}return n=nn([Object(L.I)({declarations:[Z],imports:[R.a,A.a,U.a,T.l.forChild(Z),E.b.forChild()]})],n)}(),un=u(1243),tn=u(1244),on=u(1245),en=u(1246),an=u(1247),rn=u(1248),sn=u(1249),cn=u(1250),_n=u(1251),dn=u(1254),fn=u(1255),mn=u(1256),pn=u(1257),hn=u(1288),gn=u(1253),In=u(315),bn=u(3),vn=u(227),yn=u(182),Pn=u(39),kn=u(10),Cn=u(15),Dn=u(13),jn=u(23),On=u(2),xn=u(16),Sn=u(22),Vn=u(20),wn=u(24),Ln=u(78),Tn=u(71),En=u(67),Rn=u(28),An=u(112),Un=u(38),Mn=u(231),Fn=u(8),Nn=u(204),$n=u(168),Hn=u(119),qn=u(68),Yn=u(443),zn=u(270),Wn=u(42),Bn=u(33),Gn=u(19),Jn=u(18),Kn=u(29),Qn=u(32),Xn=u(43),Zn=u(37),nl=u(416),ll=u(265),ul=u(114),tl=u(121),ol=u(120),el=u(75),al=u(35),il=u(25),rl=u(61),sl=u(94),cl=u(17),_l=u(76),dl=u(27),fl=u(260),ml=u(210),pl=u(157),hl=u(142),gl=u(412),Il=u(185),bl=u(166),vl=u(417),yl=u(1299),Pl=u(85),kl=L._29({encapsulation:2,styles:[],data:{}}),Cl=(L._27("addon-mod-forum-post",yl.a,function(n){return L._57(0,[(n()(),L._31(0,0,null,null,1,"addon-mod-forum-post",[],null,null,null,m,kl)),L._30(1,245760,null,0,yl.a,[Vn.a,Y.a,Pl.a,H.a,kn.a,Cn.a,W.a,G.a,B.a,J.a,[2,z.a]],null,null)],function(n,l){n(l,1,0)},null)},{post:"post",courseId:"courseId",discussionId:"discussionId",component:"component",componentId:"componentId",replyData:"replyData",originalData:"originalData",trackPosts:"trackPosts",forum:"forum",defaultSubject:"defaultSubject"},{onPostChange:"onPostChange"},[]),u(184)),Dl=u(402),jl=u(34),Ol=u(1252),xl=u(403),Sl=u(80),Vl=u(72),wl=u(77),Ll=u(65),Tl=u(66),El=u(183),Rl=u(93),Al=u(139),Ul=u(203),Ml=u(150),Fl=u(57),Nl=u(55),$l=u(54),Hl=L._29({encapsulation:2,styles:[],data:{}}),ql=L._27("page-addon-mod-forum-discussion",Z,function(n){return L._57(0,[(n()(),L._31(0,0,null,null,1,"page-addon-mod-forum-discussion",[],null,null,null,w,Hl)),L._30(1,180224,null,0,Z,[$l.a,M.a,F.a,N.a,$.a,H.a,q.a,Cn.a,Y.a,W.a,B.a,G.a,J.a,[2,z.a]],null,null)],null,null)},{},{},[]),Yl=u(311),zl=u(312),Wl=u(314),Bl=u(313),Gl=u(401),Jl=u(615),Kl=u(111),Ql=u(70),Xl=u(228);u.d(l,"AddonModForumDiscussionPageModuleNgFactory",function(){return Zl});var Zl=L._28(ln,[],function(n){return L._40([L._41(512,L.o,L._21,[[8,[un.a,tn.a,on.a,en.a,an.a,rn.a,sn.a,cn.a,_n.a,dn.a,fn.a,mn.a,pn.a,hn.a,ql]],[3,L.o],L.K]),L._41(4608,Fn.m,Fn.l,[L.G,[2,Fn.v]]),L._41(4608,cl.x,cl.x,[]),L._41(4608,cl.d,cl.d,[]),L._41(4608,Yl.b,Yl.a,[]),L._41(4608,zl.a,zl.b,[]),L._41(4608,Wl.b,Wl.a,[]),L._41(4608,Bl.b,Bl.a,[]),L._41(4608,Cn.a,Cn.a,[Gl.a,Yl.b,zl.a,Wl.b,Bl.b,Cn.b,Cn.c]),L._41(512,Fn.b,Fn.b,[]),L._41(512,cl.v,cl.v,[]),L._41(512,cl.i,cl.i,[]),L._41(512,cl.s,cl.s,[]),L._41(512,Jl.a,Jl.a,[]),L._41(512,E.b,E.b,[]),L._41(512,A.a,A.a,[]),L._41(512,Kl.a,Kl.a,[]),L._41(512,R.a,R.a,[]),L._41(512,Ql.a,Ql.a,[]),L._41(512,U.a,U.a,[]),L._41(512,Jl.b,Jl.b,[]),L._41(512,ln,ln,[]),L._41(256,Cn.c,void 0,[]),L._41(256,Cn.b,void 0,[]),L._41(256,Xl.a,Z,[])])})}});