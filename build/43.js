webpackJsonp([43],{1820:function(l,n,u){"use strict";function e(l){return c._57(0,[(l()(),c._31(0,0,null,null,21,"div",[],null,null,null,null,null)),(l()(),c._55(-1,null,["\n                "])),(l()(),c._31(2,0,null,null,2,"p",[["padding",""]],null,null,null,null,null)),(l()(),c._55(3,null,["",""])),c._47(131072,H.a,[E.a,c.j]),(l()(),c._55(-1,null,["\n                "])),(l()(),c._31(6,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,M.b,M.a)),c._30(7,1097728,null,3,D.a,[T.a,A.a,c.t,c.V,[2,B.a]],null,null),c._52(335544320,2,{contentLabel:0}),c._52(603979776,3,{_buttons:1}),c._52(603979776,4,{_icons:1}),c._30(11,16384,null,0,$.a,[],null,null),(l()(),c._55(-1,2,["\n                    "])),(l()(),c._31(13,0,null,3,6,"ion-input",[["formControlName","siteUrl"],["name","url"],["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,N.b,N.a)),c._30(14,81920,null,0,q.a,[c.t,p.a,K.a,[2,G.a]],null,null),c._30(15,671744,null,0,b.f,[[3,b.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),c._50(2048,null,b.m,null,[b.f]),c._30(17,16384,null,0,b.n,[b.m],null,null),c._30(18,5423104,null,0,J.a,[A.a,z.a,T.a,Q.a,c.t,c.V,[2,W.a],[2,D.a],[2,b.m],X.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),c._47(131072,H.a,[E.a,c.j]),(l()(),c._55(-1,2,["\n                "])),(l()(),c._55(-1,null,["\n            "]))],function(l,n){l(n,14,0);l(n,15,0,"siteUrl");l(n,18,0,"url",c._34(1,"",c._56(n,18,1,c._44(n,19).transform("core.login.siteaddress")),""))},function(l,n){l(n,3,0,c._56(n,3,0,c._44(n,4).transform("core.login.newsitedescription")));l(n,13,0,c._44(n,17).ngClassUntouched,c._44(n,17).ngClassTouched,c._44(n,17).ngClassPristine,c._44(n,17).ngClassDirty,c._44(n,17).ngClassValid,c._44(n,17).ngClassInvalid,c._44(n,17).ngClassPending)})}function t(l){return c._57(0,[(l()(),c._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),c._30(1,16384,[[8,4]],0,Y.a,[c.t],{value:[0,"value"]},null),(l()(),c._55(2,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.url)},function(l,n){l(n,2,0,n.context.$implicit.name)})}function i(l){return c._57(0,[(l()(),c._31(0,0,null,null,25,"ion-item",[["class","item item-block"]],null,null,null,M.b,M.a)),c._30(1,1097728,null,3,D.a,[T.a,A.a,c.t,c.V,[2,B.a]],null,null),c._52(335544320,5,{contentLabel:0}),c._52(603979776,6,{_buttons:1}),c._52(603979776,7,{_icons:1}),c._30(5,16384,null,0,$.a,[],null,null),(l()(),c._55(-1,2,["\n                    "])),(l()(),c._55(-1,2,["\n                    "])),(l()(),c._31(8,0,null,1,3,"ion-label",[["for","siteSelect"]],null,null,null,null,null)),c._30(9,16384,[[5,4]],0,Z.a,[A.a,c.t,c.V,[8,null],[8,null],[8,null],[8,null]],null,null),(l()(),c._55(10,null,["",""])),c._47(131072,H.a,[E.a,c.j]),(l()(),c._55(-1,2,["\n                    "])),(l()(),c._31(13,0,null,3,11,"ion-select",[["formControlName","siteUrl"],["interface","popover"],["name","url"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(l,n,u){var e=!0;if("click"===n){e=!1!==c._44(l,14)._click(u)&&e}if("keyup.space"===n){e=!1!==c._44(l,14)._keyup()&&e}return e},ll.b,ll.a)),c._30(14,1228800,null,1,nl.a,[Q.a,T.a,A.a,c.t,c.V,[2,D.a],ul.a],{placeholder:[0,"placeholder"],interface:[1,"interface"]},null),c._52(603979776,8,{options:1}),c._47(131072,H.a,[E.a,c.j]),c._50(1024,null,b.l,function(l){return[l]},[nl.a]),c._30(18,671744,null,0,b.f,[[3,b.b],[8,null],[8,null],[2,b.l]],{name:[0,"name"]},null),c._50(2048,null,b.m,null,[b.f]),c._30(20,16384,null,0,b.n,[b.m],null,null),(l()(),c._55(-1,null,["\n                        "])),(l()(),c._26(16777216,null,null,1,null,t)),c._30(23,802816,null,0,el.j,[c._11,c._6,c.E],{ngForOf:[0,"ngForOf"]},null),(l()(),c._55(-1,null,["\n                    "])),(l()(),c._55(-1,2,["\n                "]))],function(l,n){var u=n.component;l(n,14,0,c._34(1,"",c._56(n,14,0,c._44(n,16).transform("core.login.siteaddress")),""),"popover");l(n,18,0,"siteUrl");l(n,23,0,u.fixedSites)},function(l,n){l(n,10,0,c._56(n,10,0,c._44(n,11).transform("core.login.selectsite")));l(n,13,0,c._44(n,14)._disabled,c._44(n,20).ngClassUntouched,c._44(n,20).ngClassTouched,c._44(n,20).ngClassPristine,c._44(n,20).ngClassDirty,c._44(n,20).ngClassValid,c._44(n,20).ngClassInvalid,c._44(n,20).ngClassPending)})}function o(l){return c._57(0,[(l()(),c._31(0,0,null,null,2,"a",[["block",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(l,n,u){var e=!0;if("click"===n){e=!1!==l.component.connect(l.context.$implicit.url)&&e}return e},tl.b,tl.a)),c._30(1,1097728,null,0,il.a,[[8,""],A.a,c.t,c.V],{block:[0,"block"]},null),(l()(),c._55(2,0,["",""]))],function(l,n){l(n,1,0,"")},function(l,n){l(n,0,0,c._34(1,"",n.context.$implicit.name,""));l(n,2,0,n.context.$implicit.name)})}function a(l){return c._57(0,[(l()(),c._31(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),c._55(-1,null,["\n                    "])),(l()(),c._31(2,0,null,null,2,"p",[["class","padding no-padding-bottom"]],null,null,null,null,null)),(l()(),c._55(3,null,["",""])),c._47(131072,H.a,[E.a,c.j]),(l()(),c._55(-1,null,["\n                    "])),(l()(),c._26(16777216,null,null,1,null,o)),c._30(7,802816,null,0,el.j,[c._11,c._6,c.E],{ngForOf:[0,"ngForOf"]},null),(l()(),c._55(-1,null,["\n                "]))],function(l,n){l(n,7,0,n.component.fixedSites)},function(l,n){l(n,3,0,c._56(n,3,0,c._44(n,4).transform("core.login.selectsite")))})}function r(l){return c._57(0,[(l()(),c._31(0,0,null,null,9,"div",[["text-wrap",""]],null,null,null,null,null)),(l()(),c._55(-1,null,["\n                "])),(l()(),c._55(-1,null,["\n                "])),(l()(),c._26(16777216,null,null,1,null,i)),c._30(4,16384,null,0,el.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(l()(),c._55(-1,null,["\n\n                "])),(l()(),c._55(-1,null,["\n                "])),(l()(),c._26(16777216,null,null,1,null,a)),c._30(8,16384,null,0,el.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(l()(),c._55(-1,null,["\n            "]))],function(l,n){var u=n.component;l(n,4,0,!u.displayAsButtons);l(n,8,0,u.displayAsButtons)},null)}function s(l){return c._57(0,[(l()(),c._31(0,0,null,null,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],null,null,tl.b,tl.a)),c._30(1,1097728,null,0,il.a,[[8,""],A.a,c.t,c.V],{block:[0,"block"]},null),(l()(),c._55(2,0,["",""])),c._47(131072,H.a,[E.a,c.j])],function(l,n){l(n,1,0,"")},function(l,n){l(n,0,0,!n.component.siteForm.valid);l(n,2,0,c._56(n,2,0,c._44(n,3).transform("core.login.connect")))})}function _(l){return c._57(0,[(l()(),c._31(0,0,null,null,24,"ion-header",[],null,null,null,null,null)),c._30(1,16384,null,0,ol.a,[A.a,c.t,c.V,[2,al.a]],null,null),(l()(),c._55(-1,null,["\n    "])),(l()(),c._31(3,0,null,null,20,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,rl.b,rl.a)),c._30(4,49152,null,0,sl.a,[Q.a,[2,al.a],[2,G.a],A.a,c.t,c.V],null,null),(l()(),c._55(-1,3,["\n        "])),(l()(),c._31(6,0,null,3,3,"ion-title",[],null,null,null,_l.b,_l.a)),c._30(7,49152,null,0,cl.a,[A.a,c.t,c.V,[2,dl.a],[2,sl.a]],null,null),(l()(),c._55(8,0,["",""])),c._47(131072,H.a,[E.a,c.j]),(l()(),c._55(-1,3,["\n\n        "])),(l()(),c._31(11,0,null,2,11,"ion-buttons",[["end",""]],null,null,null,null,null)),c._30(12,16384,null,1,fl.a,[A.a,c.t,c.V,[2,dl.a],[2,sl.a]],null,null),c._52(603979776,1,{_buttons:1}),(l()(),c._55(-1,null,["\n            "])),(l()(),c._31(15,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,u){var e=!0;if("click"===n){e=!1!==l.component.showHelp()&&e}return e},tl.b,tl.a)),c._30(16,1097728,[[1,4]],0,il.a,[[8,""],A.a,c.t,c.V],null,null),c._47(131072,H.a,[E.a,c.j]),(l()(),c._55(-1,0,["\n                "])),(l()(),c._31(19,0,null,0,1,"ion-icon",[["name","help-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),c._30(20,147456,null,0,gl.a,[A.a,c.t,c.V],{name:[0,"name"]},null),(l()(),c._55(-1,0,["\n            "])),(l()(),c._55(-1,null,["\n        "])),(l()(),c._55(-1,3,["\n    "])),(l()(),c._55(-1,null,["\n"])),(l()(),c._55(-1,null,["\n"])),(l()(),c._31(26,0,null,null,28,"ion-content",[["class","core-center-view"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,pl.b,pl.a)),c._30(27,4374528,null,0,W.a,[A.a,z.a,X.a,c.t,c.V,Q.a,ml.a,c.M,[2,al.a],[2,G.a]],null,null),(l()(),c._55(-1,1,["\n    "])),(l()(),c._31(29,0,null,1,24,"div",[["class","box"]],null,null,null,null,null)),(l()(),c._55(-1,null,["\n        "])),(l()(),c._31(31,0,null,null,3,"div",[["padding",""],["text-center",""]],null,null,null,null,null)),(l()(),c._55(-1,null,["\n            "])),(l()(),c._31(33,0,null,null,0,"img",[["class","avatar-full login-logo"],["role","presentation"],["src","assets/img/login_logo.png"]],null,null,null,null,null)),(l()(),c._55(-1,null,["\n        "])),(l()(),c._55(-1,null,["\n        "])),(l()(),c._31(36,0,null,null,16,"form",[["ion-list",""],["no-lines",""],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0,t=l.component;if("submit"===n){e=!1!==c._44(l,38).onSubmit(u)&&e}if("reset"===n){e=!1!==c._44(l,38).onReset()&&e}if("ngSubmit"===n){e=!1!==t.connect(t.siteForm.value.siteUrl)&&e}return e},null,null)),c._30(37,16384,null,0,b.w,[],null,null),c._30(38,540672,null,0,b.h,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),c._50(2048,null,b.b,null,[b.h]),c._30(40,16384,null,0,b.o,[b.b],null,null),(l()(),c._55(-1,null,["\n            "])),(l()(),c._55(-1,null,["\n            "])),(l()(),c._26(16777216,null,null,1,null,e)),c._30(44,16384,null,0,el.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(l()(),c._55(-1,null,["\n\n            "])),(l()(),c._55(-1,null,["\n            "])),(l()(),c._26(16777216,null,null,1,null,r)),c._30(48,16384,null,0,el.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(l()(),c._55(-1,null,["\n\n            "])),(l()(),c._26(16777216,null,null,1,null,s)),c._30(51,16384,null,0,el.k,[c._11,c._6],{ngIf:[0,"ngIf"]},null),(l()(),c._55(-1,null,["\n        "])),(l()(),c._55(-1,null,["\n    "])),(l()(),c._55(-1,1,["\n"])),(l()(),c._55(-1,null,["\n"]))],function(l,n){var u=n.component;l(n,20,0,"help-circle");l(n,38,0,u.siteForm);l(n,44,0,!u.fixedSites);l(n,48,0,u.fixedSites);l(n,51,0,!u.fixedSites||!u.displayAsButtons)},function(l,n){l(n,3,0,c._44(n,4)._hidden,c._44(n,4)._sbPadding);l(n,8,0,c._56(n,8,0,c._44(n,9).transform("core.login.connecttomoodle")));l(n,15,0,c._56(n,15,0,c._44(n,17).transform("core.help")));l(n,19,0,c._44(n,20)._hidden);l(n,26,0,c._44(n,27).statusbarPadding,c._44(n,27)._hasRefresher);l(n,36,0,c._44(n,40).ngClassUntouched,c._44(n,40).ngClassTouched,c._44(n,40).ngClassPristine,c._44(n,40).ngClassDirty,c._44(n,40).ngClassValid,c._44(n,40).ngClassInvalid,c._44(n,40).ngClassPending)})}Object.defineProperty(n,"__esModule",{value:!0});var c=u(0),d=u(9),f=u(12),g=u(1),p=u(6),m=u(115),h=u(113),b=u(17),v=this&&this.__decorate||function(l,n,u,e){var t,i=arguments.length,o=i<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,u):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(l,n,u,e);else for(var a=l.length-1;a>=0;a--)(t=l[a])&&(o=(i<3?t(o):i>3?t(n,u,o):t(n,u))||o);return i>3&&o&&Object.defineProperty(n,u,o),o},y=this&&this.__metadata||function(l,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(l,n)},C=function(){function l(l,n,u,e,t,i,o){this.navCtrl=l,this.appProvider=u,this.sitesProvider=e,this.loginHelper=t,this.modalCtrl=i,this.domUtils=o,this.displayAsButtons=!1;var a="";this.loginHelper.hasSeveralFixedSites()&&(this.fixedSites=this.loginHelper.getFixedSites(),this.displayAsButtons="buttons"==m.a.multisitesdisplay,a=this.fixedSites[0].url),this.siteForm=n.group({siteUrl:[a,b.u.required]})}return l.prototype.connect=function(l){var n=this;if(this.appProvider.closeKeyboard(),l)if(this.appProvider.isOnline()){var u=this.domUtils.showModalLoading(),e=this.sitesProvider.getDemoSiteData(l);e?this.sitesProvider.getUserToken(e.url,e.username,e.password).then(function(l){return n.sitesProvider.newSite(l.siteUrl,l.token,l.privateToken).then(function(){return n.loginHelper.goToSiteInitialPage()},function(l){n.domUtils.showErrorModal(l)})},function(l){n.loginHelper.treatUserTokenError(e.url,l)}).finally(function(){u.dismiss()}):this.sitesProvider.checkSite(l).then(function(l){l.warning&&n.domUtils.showErrorModal(l.warning,!0,4e3),n.loginHelper.isSSOLoginNeeded(l.code)?n.loginHelper.confirmAndOpenBrowserForSSOLogin(l.siteUrl,l.code,l.service,l.config&&l.config.launchurl):n.navCtrl.push("CoreLoginCredentialsPage",{siteUrl:l.siteUrl,siteConfig:l.config})},function(u){n.showLoginIssue(l,u)}).finally(function(){u.dismiss()})}else this.domUtils.showErrorModal("core.networkerrormsg",!0);else this.domUtils.showErrorModal("core.login.siteurlrequired",!0)},l.prototype.showHelp=function(){this.modalCtrl.create("CoreLoginSiteHelpPage").present()},l.prototype.showLoginIssue=function(l,n){this.modalCtrl.create("CoreLoginSiteErrorPage",{siteUrl:l,issue:n}).present()},l=v([Object(c.m)({selector:"page-core-login-site",templateUrl:"site.html"}),y("design:paramtypes",[d.q,b.d,f.a,g.a,h.a,d.o,p.a])],l)}(),k=u(7),S=u(30),P=this&&this.__decorate||function(l,n,u,e){var t,i=arguments.length,o=i<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,u):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(l,n,u,e);else for(var a=l.length-1;a>=0;a--)(t=l[a])&&(o=(i<3?t(o):i>3?t(n,u,o):t(n,u))||o);return i>3&&o&&Object.defineProperty(n,u,o),o},U=function(){function l(){}return l=P([Object(c.I)({declarations:[C],imports:[S.a,d.l.forChild(C),k.b.forChild()]})],l)}(),w=u(1243),j=u(1244),x=u(1245),I=u(1246),O=u(1247),V=u(1248),F=u(1249),L=u(1250),R=u(1251),H=u(28),E=u(15),M=u(33),D=u(19),T=u(18),A=u(3),B=u(29),$=u(32),N=u(94),q=u(319),K=u(4),G=u(20),J=u(76),z=u(13),Q=u(27),W=u(24),X=u(25),Y=u(102),Z=u(61),ll=u(118),nl=u(103),ul=u(48),el=u(8),tl=u(43),il=u(37),ol=u(402),al=u(34),rl=u(1252),sl=u(182),_l=u(1253),cl=u(315),dl=u(227),fl=u(403),gl=u(38),pl=u(183),ml=u(93),hl=u(206),bl=c._29({encapsulation:2,styles:[],data:{}}),vl=c._27("page-core-login-site",C,function(l){return c._57(0,[(l()(),c._31(0,0,null,null,1,"page-core-login-site",[],null,null,null,_,bl)),c._30(1,49152,null,0,C,[G.a,b.d,f.a,g.a,h.a,hl.a,p.a],null,null)],null,null)},{},{},[]),yl=u(311),Cl=u(312),kl=u(314),Sl=u(313),Pl=u(401),Ul=u(615),wl=u(228);u.d(n,"CoreLoginSitePageModuleNgFactory",function(){return jl});var jl=c._28(U,[],function(l){return c._40([c._41(512,c.o,c._21,[[8,[w.a,j.a,x.a,I.a,O.a,V.a,F.a,L.a,R.a,vl]],[3,c.o],c.K]),c._41(4608,el.m,el.l,[c.G,[2,el.v]]),c._41(4608,b.x,b.x,[]),c._41(4608,b.d,b.d,[]),c._41(4608,yl.b,yl.a,[]),c._41(4608,Cl.a,Cl.b,[]),c._41(4608,kl.b,kl.a,[]),c._41(4608,Sl.b,Sl.a,[]),c._41(4608,E.a,E.a,[Pl.a,yl.b,Cl.a,kl.b,Sl.b,E.b,E.c]),c._41(512,S.a,S.a,[]),c._41(512,el.b,el.b,[]),c._41(512,b.v,b.v,[]),c._41(512,b.i,b.i,[]),c._41(512,b.s,b.s,[]),c._41(512,Ul.a,Ul.a,[]),c._41(512,Ul.b,Ul.b,[]),c._41(512,k.b,k.b,[]),c._41(512,U,U,[]),c._41(256,wl.a,C,[]),c._41(256,E.c,void 0,[]),c._41(256,E.b,void 0,[])])})}});