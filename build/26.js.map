{"version":3,"sources":["../../src/core/mainmenu/pages/menu/menu.module.ts","../../src/core/mainmenu/pages/menu/menu.ts"],"names":[],"mappings":"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","file":"26.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CoreMainMenuPage } from './menu';\n\n@NgModule({\n    declarations: [\n        CoreMainMenuPage,\n    ],\n    imports: [\n        IonicPageModule.forChild(CoreMainMenuPage),\n        TranslateModule.forChild()\n    ],\n})\nexport class CoreMainMenuPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/mainmenu/pages/menu/menu.module.ts","// (C) Copyright 2015 Martin Dougiamas\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Tabs } from 'ionic-angular';\nimport { CoreSitesProvider } from '@providers/sites';\nimport { CoreMainMenuProvider } from '../../providers/mainmenu';\nimport { CoreMainMenuDelegate, CoreMainMenuHandlerData } from '../../providers/delegate';\n\n/**\n * Page that displays the main menu of the app.\n */\n@IonicPage({segment: 'core-mainmenu'})\n@Component({\n    selector: 'page-core-mainmenu',\n    templateUrl: 'menu.html',\n})\nexport class CoreMainMenuPage implements OnDestroy {\n    // Use a setter to wait for ion-tabs to be loaded because it's inside a ngIf.\n    @ViewChild('mainTabs') set mainTabs(ionTabs: Tabs) {\n        if (ionTabs && this.redirectPage && !this.redirectPageLoaded) {\n            // Tabs ready and there is a redirect page set. Load it.\n            this.redirectPageLoaded = true;\n\n            // Check if the page is the root page of any of the tabs.\n            let indexToSelect = 0;\n            for (let i = 0; i < this.tabs.length; i++) {\n                if (this.tabs[i].page == this.redirectPage) {\n                    indexToSelect = i + 1;\n                    break;\n                }\n            }\n\n            // Use a setTimeout, otherwise loading the first tab opens a new state for some reason.\n            setTimeout(() => {\n                ionTabs.select(indexToSelect);\n            });\n        }\n    }\n\n    tabs: CoreMainMenuHandlerData[] = [];\n    loaded: boolean;\n    redirectPage: string;\n    redirectParams: any;\n    initialTab: number;\n\n    protected subscription;\n    protected moreTabData = {\n        page: 'CoreMainMenuMorePage',\n        title: 'core.more',\n        icon: 'more'\n    };\n    protected moreTabAdded = false;\n    protected redirectPageLoaded = false;\n\n    constructor(private menuDelegate: CoreMainMenuDelegate, private sitesProvider: CoreSitesProvider, navParams: NavParams,\n            private navCtrl: NavController) {\n        this.redirectPage = navParams.get('redirectPage');\n        this.redirectParams = navParams.get('redirectParams');\n    }\n\n    /**\n     * View loaded.\n     */\n    ionViewDidLoad(): void {\n        if (!this.sitesProvider.isLoggedIn()) {\n            this.navCtrl.setRoot('CoreLoginInitPage');\n\n            return;\n        }\n\n        const site = this.sitesProvider.getCurrentSite(),\n            displaySiteHome = site.getInfo() && site.getInfo().userhomepage === 0;\n\n        this.subscription = this.menuDelegate.getHandlers().subscribe((handlers) => {\n            handlers = handlers.slice(0, CoreMainMenuProvider.NUM_MAIN_HANDLERS); // Get main handlers.\n\n            // Check if handlers are already in tabs. Add the ones that aren't.\n            // @todo: https://github.com/ionic-team/ionic/issues/13633\n            for (let i = 0; i < handlers.length; i++) {\n                const handler = handlers[i],\n                    shouldSelect = (displaySiteHome && handler.name == 'CoreSiteHome') ||\n                                   (!displaySiteHome && handler.name == 'CoreCourses');\n                let found = false;\n\n                for (let j = 0; j < this.tabs.length; j++) {\n                    const tab = this.tabs[j];\n                    if (tab.title == handler.title && tab.icon == handler.icon) {\n                        found = true;\n                        if (shouldSelect) {\n                            this.initialTab = j;\n                        }\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    this.tabs.push(handler);\n                    if (shouldSelect) {\n                        this.initialTab = this.tabs.length;\n                    }\n                }\n            }\n\n            if (!this.moreTabAdded) {\n                this.moreTabAdded = true;\n                this.tabs.push(this.moreTabData); // Add \"More\" tab.\n            }\n\n            this.loaded = this.menuDelegate.areHandlersLoaded();\n        });\n    }\n\n    /**\n     * Page destroyed.\n     */\n    ngOnDestroy(): void {\n        this.subscription && this.subscription.unsubscribe();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/mainmenu/pages/menu/menu.ts"],"sourceRoot":""}